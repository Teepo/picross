{"version":3,"file":"js/48.1edc645a.js","mappings":"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","sources":["webpack://picross/./src/components/Picross.vue","webpack://picross/./src/components/Cell.vue","webpack://picross/./src/components/Svg.vue","webpack://picross/./src/components/Svg.vue?68c6","webpack://picross/./src/components/Cell.vue?a53a","webpack://picross/./src/components/Life.vue","webpack://picross/./src/components/Life.vue?3147","webpack://picross/./src/components/Picross.vue?de47"],"sourcesContent":["<template>\n    \n    <div :class=\"{\n        'container' : true,\n        'picross'   : true,\n        'picross--is-disabled' : this.isDisabled\n    }\" @end=\"end\" v-if=\"this.player\">\n\n        <v-overlay v-model=\"this.showGameOverOverlay\" contained class=\"overlay-gameover align-center justify-center\">\n            <v-container>\n                <v-btn icon=\"mdi-window-close\" class=\"btn-close\" density=\"compact\" @click=\"this.showGameOverOverlay = false\" color=\"red\"></v-btn>\n                <v-card>\n                    <v-card-item>\n                        <v-card-text class=\"text-center\">\n                            <strong class=\"text-h5 d-block\">Plus de vie !</strong>\n\n                            <v-icon class=\"mt-5\" icon=\"mdi-emoticon-poop\" size=\"x-large\"></v-icon>\n\n                            <v-btn v-if=\"!this.isMultiplayer\" prepend-icon=\"mdi-restore\" class=\"mt-8 bg-primary\" @click=\"this.restart\">Recommencer le niveau</v-btn>\n                            <v-btn v-if=\"!this.isMultiplayer\" prepend-icon=\"mdi-autorenew\" class=\"mt-8 bg-primary\" @click=\"this.newGame\">Jouer à un autre niveau</v-btn>\n                        </v-card-text>\n                    </v-card-item>\n                </v-card>\n            </v-container>\n        </v-overlay>\n\n        <div class=\"lifes\">\n            <template v-for=\"(x, index) in [...Array(this.lifeCount)]\" :key=\"x\">\n                <Life ref=\"hearts\" :_is-disabled=\"index >= this.player.life\" />\n            </template>\n        </div>\n\n        <div class=\"grid-wrapper\">\n            <div class=\"grid tasks tasks-v\">\n                <div v-for=\"(items, x) in this.getTasksV()\" class=\"task\" :key=\"x\">\n                    <template v-if=\"items.length > 0\">\n                        <span v-for=\"(item, y) in items\" :key=\"y\">{{ item }}</span>\n                    </template>\n                    <template v-else>\n                        <span>0</span>\n                    </template>\n                </div>\n            </div>\n            <div class=\"grid tasks tasks-h\">\n                <div class=\"task\" v-for=\"(items, x) in this.getTasksH()\" :key=\"x\">\n                    <template v-if=\"items.length > 0\">\n                        <span v-for=\"(item, y) in items\" :key=\"y\">{{ item }}</span>\n                    </template>\n                    <template v-else>\n                        <span>0</span>\n                    </template>\n                </div>\n            </div>\n            <div class=\"grid cells\">\n                <template v-for=\"(item, x) in this.player.board\">\n                    <Cell\n                        v-for=\"(item, y) in this.player.board[x]\"\n                        :key=\"y\" :_x=\"x\" :_y=\"y\"\n                        :_isSelected=\"item === 1\"\n                        :_isCrossed=\"item === -1\"\n                        ref=\"cells\"\n                        @decrease-life=\"decreaseLifeHandler\"\n                    />\n                </template>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n\nimport coherentRandom from './../boards/coherentRandom';\n\nimport { updatePlayerBoard, updatePlayerBoardCell, updatePlayerLife } from './../database/firebase/index.js';\n\nimport Cell from './../components/Cell.vue';\nimport Life from './../components/Life.vue';\n\nexport default {\n\n    components : { Cell, Life },\n\n    props : {\n        _player: {\n            type: Object\n        },\n        _board: {\n            type: Array\n        },\n        _isDisabled: {\n            type: Boolean,\n            default: false\n        },\n        isMultiplayer: {\n            type: Boolean,\n            default: false\n        }\n    },\n\n    data() {\n\n        return {\n\n            player : this._player,\n\n            isDisabled : this._isDisabled,\n            \n            gridSize : {\n                x : 15,\n                y : 15\n            },\n            board : this._board,\n            lifeCount : 3,\n            lifeLeft  : 3,\n\n            showGameOverOverlay : false\n        };\n    },\n\n    beforeMount() {\n\n        if (this.isMultiplayer && !this.isDisabled) {\n            this.id = sessionStorage.getItem('id');\n        }\n\n        this.$root.board = this.board;\n        this.$root.gridSize = this.gridSize;\n\n        let defaultPlayerBoard = [\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n        ];\n\n        this.player = this._player ?? {\n            board : defaultPlayerBoard,\n            life  : this.lifeLeft\n        };\n\n        this.lifeLeft = this.player.life;\n\n        if (this.isMultiplayer && !this.isDisabled) {\n\n            // on récupère l'état du board\n            this.updateBoard();\n        }\n    },\n\n    methods: {\n\n        getTasksH() {\n\n            const tasksH = [];\n\n            this.board.map((h, i) => {\n\n                let ii = 0;\n                h.map((hv, y) => {\n\n                    if (!tasksH[i]) {\n                        tasksH[i] = [];\n                    }\n\n                    if (this.board[i][y] === 1) {\n                        ii++;\n                    }\n                    else {\n                        ii > 0 && tasksH[i].push(ii);\n                        ii = 0;\n                    }\n\n                    if (y == this.gridSize.y-1) {\n                        ii > 0 && tasksH[i].push(ii);\n                        ii = 0;\n                    }\n                });\n            });\n\n            return tasksH;\n        },\n\n        getTasksV() {\n\n            const tasksV = [];\n\n            let xi = 0;\n            let ii = 0;\n            [...Array(this.gridSize.x)].map((xx, xValue) => {\n\n                if (!tasksV[xi]) {\n                    tasksV[xi] = [];\n                }\n\n                [...Array(this.gridSize.y)].map((yy, yValue) => {\n\n                    if (this.board[yValue][xi] === 1) {\n                        ii++;\n                    }\n                    else {\n                        ii > 0 && tasksV[xi].push(ii);\n                        ii = 0;\n                    }\n\n                    if (yValue == this.gridSize.y-1) {\n                        ii > 0 && tasksV[xi].push(ii);\n                        ii = 0;\n                    }\n                });\n\n                xi++;\n            });\n\n            return tasksV;\n        },\n\n        decreaseLifeHandler() {\n\n            this.lifeLeft--;\n\n            const heart = this.$refs.hearts[this.lifeLeft] ?? null;\n\n            heart && (heart.isDisabled = true);\n\n            this.isMultiplayer && updatePlayerLife({\n                id   : this.player.id,\n                life : this.lifeLeft\n            });\n\n            if (this.lifeLeft <= 0) {\n                this.gameover()\n                return;\n            }\n        },\n\n        win() {\n         \n            this.isDisabled = true;\n        },\n\n        gameover() {\n            this.isDisabled          = true;\n            this.showGameOverOverlay = true;\n        },\n\n        restart() {\n\n            this.isDisabled          = false;\n            this.showGameOverOverlay = false;\n\n            this.lifeLeft    = 3;\n            this.player.life = 3;\n\n            this.$refs.hearts.map(heart => {\n                heart.isDisabled = false;\n            });\n\n            this.$refs.cells.map(cell => {\n                cell.isSelected = false;\n                cell.isCrossed  = false;\n                cell.hasError   = false;\n            });\n        },\n\n        newGame() {\n\n            this.restart();\n\n            this.board = coherentRandom(15, 15);\n            this.player.board = this.board;\n        },\n\n        updateBoard() {\n\n            updatePlayerBoard({\n                id    : this.id,\n                board : this.player.board\n            });\n        },\n\n        /**\n         * @param {Number} x\n         * @param {Number} y\n         * @param {Number} state\n         *\n         */\n         updateCell(x = null, y = null, state = null) {\n\n            updatePlayerBoardCell({\n                id    : this.id,\n                x     : x,\n                y     : y,\n                state : state\n            });\n        }\n    }\n}\n\n</script>","<template>\n    <div :class=\"{\n        'cell'                : true,\n        \n        'cell--is-selected'   : this.isSelected,\n        'cell--is-crossed'    : this.isCrossed,\n        \n        'cell--has-error'     : this.hasError,\n        'cell--has-s-error'   : this.hasError && this.isSelected,\n        'cell--has-c-error'   : this.hasError && this.isCrossed,\n        \n        'cell--with-h-border' : (this.y % 5) === 0 && this.y > 0,\n        'cell--with-v-border' : (this.x % 5) === 0 && this.x > 0,\n    }\"\n    @click=\"clickHandler\"\n    @contextmenu=\"clickHandler\"\n    @mouseenter=\"clickHandler\"\n    ref=\"cells\">\n        <Svg name=\"cross\" v-if=\"this.isCrossed\"></Svg>\n    </div>\n</template>\n\n<script>\n\nimport Svg from './Svg.vue';\n\nimport { AudioManager } from './../modules/AudioManager.js';\n\nexport default {\n\n    components : { Svg },\n\n    props: {\n        _x : { type : Number, required : true },\n        _y : { type : Number, required : true },\n        _isSelected : { type : Boolean, required : true },\n        _isCrossed  : { type : Boolean, required : true },\n    },\n\n    data : function() {\n\n        return {\n\n            isSelected : this._isSelected,\n            isCrossed  : this._isCrossed,\n            hasError   : false,\n\n            x : this._x,\n            y : this._y,\n        };\n    },\n\n    mounted() {\n\n        if (!this.$root.cells) {\n            this.$root.cells = [];\n        }\n\n        if (!this.$root.cells[this.x]) {\n            this.$root.cells[this.x] = [];\n        }\n\n        if (!this.$root.cells[this.x][this.y]) {\n            this.$root.cells[this.x][this.y] = null;\n        }\n\n        this.$root.cells[this.x][this.y] = this;\n    },\n\n    methods : {\n\n        clickHandler(event) {\n            \n            if (this.$parent.isDisabled) {\n                return;\n            }\n\n            const type = event.type;\n\n            if (this.isSelected || this.isCrossed) {\n                return;\n            }\n\n            if (type === 'click') {\n                this.isSelected = true;\n            }\n            else if (type === 'contextmenu') {\n                this.isCrossed = true;\n            }\n            // handle multiple action\n            else if (type === 'mouseenter') {\n\n                // right mouse button\n                if (event.which === 1) {\n                    this.isSelected = true;\n                }\n                // left mouse button\n                else if (event.which === 3) {\n                    this.isCrossed = true;\n                }\n            }\n\n            const board = this.$root.board;\n\n            // handle error\n            if (!this.hasError) {\n                \n                if (this.isSelected && board[this.x][this.y] === 0) {\n\n                    this.hasError = true;\n\n                    this.isSelected = false;\n                    this.isCrossed  = true;\n                }\n\n                if (this.isCrossed && board[this.x][this.y] === 1) {\n\n                    this.hasError = true;\n\n                    this.isSelected = true;\n                    this.isCrossed  = false;\n                }\n            }\n\n            if (this.hasError) {\n                \n                AudioManager.play('error');\n\n                this.$emit('decrease-life');\n            }\n            else if (this.isSelected || this.isCrossed) {\n                AudioManager.play('click');\n            }\n\n            if (type === 'click' || type === 'contextmenu') {\n\n                const value = this.isSelected ? 1 : (this.isCrossed ? -1 : 0);\n\n                this.$parent.player.board[this.x][this.y] = value;\n\n                // Update toute la board est un peu violent\n                // mais au moins permet de rattraper le vrai etat\n                // de la board du client en cas de desynchro.\n                this.$parent.isMultiplayer && this.$parent.updateBoard();\n                // this.$parent.updateCell(this.x, this.y, this.isSelected ? 1 : -1);\n\n                this.checkIfBoardIsCleared();\n            }\n        },\n\n        checkIfBoardIsCleared() {\n\n            let validCellCount    = 0;\n            let revealedCellCount = 0;\n\n            for (let x in [...Array(this.$root.gridSize.x)]) {\n                for (let y in [...Array(this.$root.gridSize.y)]) {\n\n                    if (this.$root.board[x][y] === 1) {\n                        validCellCount++;\n                    }\n\n                    if (this.$root.cells[x][y].isSelected || this.$root.cells[x][y].isCrossed) {\n                        revealedCellCount++;\n                    }\n                }\n            }\n\n            if (validCellCount === revealedCellCount) {\n                this.$parent.win();\n            }\n        }\n    }\n}\n</script>","<template>\n    <svg :class=\"`u-icon u-icon-${name}`\" :viewBox=\"viewbox\" role=\"img\">\n        <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" :xlink:href=\"`${url}#${name}`\"></use>\n    </svg>\n</template>\n\n<script>\nexport default {\n    props: {\n        viewbox: String,\n        name: String,\n        url: {\n            type: String,\n            default: `http://${window.location.host}/svg/sprite.svg`\n        },\n        className: {\n            type: String\n        }\n    }\n};\n</script>\n","import { render } from \"./Svg.vue?vue&type=template&id=dbc0e76a\"\nimport script from \"./Svg.vue?vue&type=script&lang=js\"\nexport * from \"./Svg.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/anthony/App/picross/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Cell.vue?vue&type=template&id=58aa12fe\"\nimport script from \"./Cell.vue?vue&type=script&lang=js\"\nexport * from \"./Cell.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/anthony/App/picross/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <Svg\n        name=\"heart\"\n        ref=\"heart\"\n        :class=\"{\n            'is-disabled' : this.isDisabled\n        }\"\n    ></Svg>\n</template>\n\n<script>\n\nimport Svg from './Svg';\n\nexport default {\n    \n    components : { Svg },\n\n    props : {\n        _isDisabled: {\n            type: Boolean,\n            default: false\n        }\n    },\n\n    data() {\n        \n        return {\n            isDisabled : this._isDisabled\n        }\n    }\n}\n\n</script>","import { render } from \"./Life.vue?vue&type=template&id=3cc9147c\"\nimport script from \"./Life.vue?vue&type=script&lang=js\"\nexport * from \"./Life.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/anthony/App/picross/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Picross.vue?vue&type=template&id=659d4dc4\"\nimport script from \"./Picross.vue?vue&type=script&lang=js\"\nexport * from \"./Picross.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/anthony/App/picross/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","class","player","_createElementBlock","_normalizeClass","isDisabled","onEnd","_cache","args","_ctx","end","_createVNode","_component_v_overlay","showGameOverOverlay","$event","contained","_component_v_container","_component_v_btn","icon","density","onClick","color","_component_v_card","_component_v_card_item","_component_v_card_text","_hoisted_1","_component_v_icon","size","isMultiplayer","_createBlock","restart","newGame","_hoisted_2","_Fragment","_renderList","Array","this","lifeCount","x","index","_component_Life","ref","life","_hoisted_3","_hoisted_4","getTasksV","items","key","length","item","y","_toDisplayString","_hoisted_5","_hoisted_6","getTasksH","_hoisted_7","_hoisted_8","board","_component_Cell","_x","_y","_isSelected","_isCrossed","onDecreaseLife","$options","decreaseLifeHandler","isSelected","isCrossed","hasError","clickHandler","onContextmenu","onMouseenter","_component_Svg","name","$props","viewBox","viewbox","role","url","props","String","type","default","window","location","host","className","__exports__","components","Svg","Number","required","Boolean","data","mounted","$root","cells","methods","event","$parent","which","AudioManager","$emit","value","updateBoard","checkIfBoardIsCleared","validCellCount","revealedCellCount","gridSize","win","_isDisabled","Cell","Life","_player","Object","_board","lifeLeft","beforeMount","id","sessionStorage","getItem","defaultPlayerBoard","tasksH","map","h","i","ii","hv","push","tasksV","xi","xx","xValue","yy","yValue","heart","$refs","hearts","updatePlayerLife","gameover","cell","coherentRandom","updatePlayerBoard","updateCell","state","updatePlayerBoardCell","render"],"sourceRoot":""}