"use strict";(self["webpackChunkpicross"]=self["webpackChunkpicross"]||[]).push([[48],{9048:function(e,s,i){i.d(s,{Z:function(){return j}});var t=i(3396),r=i(7139);const l=(0,t._)("strong",{class:"text-h5 d-block"},"Plus de vie !",-1),a={class:"lifes"},o={class:"grid-wrapper"},h={class:"grid tasks tasks-v"},d={key:1},n={class:"grid tasks tasks-h"},c={key:1},u={class:"grid cells"};function p(e,s,i,p,y,f){const g=(0,t.up)("v-btn"),m=(0,t.up)("v-icon"),w=(0,t.up)("v-card-text"),k=(0,t.up)("v-card-item"),v=(0,t.up)("v-card"),b=(0,t.up)("v-container"),_=(0,t.up)("v-overlay"),C=(0,t.up)("Life"),S=(0,t.up)("Cell");return this.player?((0,t.wg)(),(0,t.iD)("div",{key:0,class:(0,r.C_)({container:!0,picross:!0,"picross--is-disabled":this.isDisabled}),onEnd:s[2]||(s[2]=(...s)=>e.end&&e.end(...s))},[(0,t.Wm)(_,{modelValue:this.showGameOverOverlay,"onUpdate:modelValue":s[1]||(s[1]=e=>this.showGameOverOverlay=e),contained:"",class:"overlay-gameover align-center justify-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,null,{default:(0,t.w5)((()=>[(0,t.Wm)(g,{icon:"mdi-window-close",class:"btn-close",density:"compact",onClick:s[0]||(s[0]=e=>this.showGameOverOverlay=!1),color:"red"}),(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[(0,t.Wm)(k,null,{default:(0,t.w5)((()=>[(0,t.Wm)(w,{class:"text-center"},{default:(0,t.w5)((()=>[l,(0,t.Wm)(m,{class:"mt-5",icon:"mdi-emoticon-poop",size:"x-large"}),this.isMultiplayer?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(g,{key:0,"prepend-icon":"mdi-restore",class:"mt-8 bg-primary",onClick:this.restart},{default:(0,t.w5)((()=>[(0,t.Uk)("Recommencer le niveau")])),_:1},8,["onClick"])),this.isMultiplayer?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(g,{key:1,"prepend-icon":"mdi-autorenew",class:"mt-8 bg-primary",onClick:this.newGame},{default:(0,t.w5)((()=>[(0,t.Uk)("Jouer Ã  un autre niveau")])),_:1},8,["onClick"]))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t._)("div",a,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)([...Array(this.lifeCount)],((e,s)=>((0,t.wg)(),(0,t.j4)(C,{key:e,ref_for:!0,ref:"hearts","_is-disabled":s>=this.player.life},null,8,["_is-disabled"])))),128))]),(0,t._)("div",o,[(0,t._)("div",h,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(this.getTasksV(),((e,s)=>((0,t.wg)(),(0,t.iD)("div",{class:"task",key:s},[e.length>0?((0,t.wg)(!0),(0,t.iD)(t.HY,{key:0},(0,t.Ko)(e,((e,s)=>((0,t.wg)(),(0,t.iD)("span",{key:s},(0,r.zw)(e),1)))),128)):((0,t.wg)(),(0,t.iD)("span",d,"0"))])))),128))]),(0,t._)("div",n,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(this.getTasksH(),((e,s)=>((0,t.wg)(),(0,t.iD)("div",{class:"task",key:s},[e.length>0?((0,t.wg)(!0),(0,t.iD)(t.HY,{key:0},(0,t.Ko)(e,((e,s)=>((0,t.wg)(),(0,t.iD)("span",{key:s},(0,r.zw)(e),1)))),128)):((0,t.wg)(),(0,t.iD)("span",c,"0"))])))),128))]),(0,t._)("div",u,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(this.player.board,((e,s)=>((0,t.wg)(),(0,t.iD)(t.HY,null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(this.player.board[s],((e,i)=>((0,t.wg)(),(0,t.j4)(S,{key:i,_x:s,_y:i,_isSelected:1===e,_isCrossed:-1===e,ref_for:!0,ref:"cells",onDecreaseLife:f.decreaseLifeHandler},null,8,["_x","_y","_isSelected","_isCrossed","onDecreaseLife"])))),128))],64)))),256))])])],34)):(0,t.kq)("",!0)}i(7658);var y=i(1490),f=i(762);function g(e,s,i,l,a,o){const h=(0,t.up)("Svg");return(0,t.wg)(),(0,t.iD)("div",{class:(0,r.C_)({cell:!0,"cell--is-selected":this.isSelected,"cell--is-crossed":this.isCrossed,"cell--has-error":this.hasError,"cell--has-s-error":this.hasError&&this.isSelected,"cell--has-c-error":this.hasError&&this.isCrossed,"cell--with-h-border":this.y%5===0&&this.y>0,"cell--with-v-border":this.x%5===0&&this.x>0}),onClick:s[0]||(s[0]=(...e)=>o.clickHandler&&o.clickHandler(...e)),onContextmenu:s[1]||(s[1]=(...e)=>o.clickHandler&&o.clickHandler(...e)),onMouseenter:s[2]||(s[2]=(...e)=>o.clickHandler&&o.clickHandler(...e)),ref:"cells"},[this.isCrossed?((0,t.wg)(),(0,t.j4)(h,{key:0,name:"cross"})):(0,t.kq)("",!0)],34)}const m=["viewBox"],w=["xlink:href"];function k(e,s,i,l,a,o){return(0,t.wg)(),(0,t.iD)("svg",{class:(0,r.C_)(`u-icon u-icon-${i.name}`),viewBox:i.viewbox,role:"img"},[(0,t._)("use",{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":`${i.url}#${i.name}`},null,8,w)],10,m)}var v={props:{viewbox:String,name:String,url:{type:String,default:`http://${window.location.host}/svg/sprite.svg`},className:{type:String}}},b=i(89);const _=(0,b.Z)(v,[["render",k]]);var C=_,S=i(5935),x={components:{Svg:C},props:{_x:{type:Number,required:!0},_y:{type:Number,required:!0},_isSelected:{type:Boolean,required:!0},_isCrossed:{type:Boolean,required:!0}},data:function(){return{isSelected:this._isSelected,isCrossed:this._isCrossed,hasError:!1,x:this._x,y:this._y}},mounted(){this.$root.cells||(this.$root.cells=[]),this.$root.cells[this.x]||(this.$root.cells[this.x]=[]),this.$root.cells[this.x][this.y]||(this.$root.cells[this.x][this.y]=null),this.$root.cells[this.x][this.y]=this},methods:{clickHandler(e){if(this.$parent.isDisabled)return;const s=e.type;if(this.isSelected||this.isCrossed)return;"click"===s?this.isSelected=!0:"contextmenu"===s?this.isCrossed=!0:"mouseenter"===s&&(1===e.which?this.isSelected=!0:3===e.which&&(this.isCrossed=!0));const i=this.$root.board;if(this.hasError||(this.isSelected&&0===i[this.x][this.y]&&(this.hasError=!0,this.isSelected=!1,this.isCrossed=!0),this.isCrossed&&1===i[this.x][this.y]&&(this.hasError=!0,this.isSelected=!0,this.isCrossed=!1)),this.hasError?(S.L.play("error"),this.$emit("decrease-life")):(this.isSelected||this.isCrossed)&&S.L.play("click"),"click"===s||"contextmenu"===s){const e=this.isSelected?1:this.isCrossed?-1:0;this.$parent.player.board[this.x][this.y]=e,this.$parent.isMultiplayer&&this.$parent.updateBoard(),this.checkIfBoardIsCleared()}},checkIfBoardIsCleared(){let e=0,s=0;for(let i in[...Array(this.$root.gridSize.x)])for(let t in[...Array(this.$root.gridSize.y)])1===this.$root.board[i][t]&&e++,(this.$root.cells[i][t].isSelected||this.$root.cells[i][t].isCrossed)&&s++;e===s&&this.$parent.win()}}};const D=(0,b.Z)(x,[["render",g]]);var $=D;function H(e,s,i,l,a,o){const h=(0,t.up)("Svg");return(0,t.wg)(),(0,t.j4)(h,{name:"heart",ref:"heart",class:(0,r.C_)({"is-disabled":this.isDisabled})},null,8,["class"])}var L={components:{Svg:C},props:{_isDisabled:{type:Boolean,default:!1}},data(){return{isDisabled:this._isDisabled}}};const O=(0,b.Z)(L,[["render",H]]);var z=O,B={components:{Cell:$,Life:z},props:{_player:{type:Object},_board:{type:Array},_isDisabled:{type:Boolean,default:!1},isMultiplayer:{type:Boolean,default:!1}},data(){return{player:this._player,isDisabled:this._isDisabled,gridSize:{x:15,y:15},board:this._board,lifeCount:3,lifeLeft:3,showGameOverOverlay:!1}},beforeMount(){this.isMultiplayer&&!this.isDisabled&&(this.id=sessionStorage.getItem("id")),this.$root.board=this.board,this.$root.gridSize=this.gridSize;let e=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];this.player=this._player??{board:e,life:this.lifeLeft},this.lifeLeft=this.player.life,this.isMultiplayer&&!this.isDisabled&&this.updateBoard()},methods:{getTasksH(){const e=[];return this.board.map(((s,i)=>{let t=0;s.map(((s,r)=>{e[i]||(e[i]=[]),1===this.board[i][r]?t++:(t>0&&e[i].push(t),t=0),r==this.gridSize.y-1&&(t>0&&e[i].push(t),t=0)}))})),e},getTasksV(){const e=[];let s=0,i=0;return[...Array(this.gridSize.x)].map(((t,r)=>{e[s]||(e[s]=[]),[...Array(this.gridSize.y)].map(((t,r)=>{1===this.board[r][s]?i++:(i>0&&e[s].push(i),i=0),r==this.gridSize.y-1&&(i>0&&e[s].push(i),i=0)})),s++})),e},decreaseLifeHandler(){this.lifeLeft--;const e=this.$refs.hearts[this.lifeLeft]??null;e&&(e.isDisabled=!0),this.isMultiplayer&&(0,f.Aj)({id:this.player.id,life:this.lifeLeft}),this.lifeLeft<=0&&this.gameover()},win(){this.isDisabled=!0},gameover(){this.isDisabled=!0,this.showGameOverOverlay=!0},restart(){this.isDisabled=!1,this.showGameOverOverlay=!1,this.lifeLeft=3,this.player.life=3,this.$refs.hearts.map((e=>{e.isDisabled=!1})),this.$refs.cells.map((e=>{e.isSelected=!1,e.isCrossed=!1,e.hasError=!1}))},newGame(){this.restart(),this.board=(0,y.Z)(15,15),this.player.board=this.board},updateBoard(){(0,f.gR)({id:this.id,board:this.player.board})},updateCell(e=null,s=null,i=null){(0,f.CS)({id:this.id,x:e,y:s,state:i})}}};const E=(0,b.Z)(B,[["render",p]]);var j=E}}]);
//# sourceMappingURL=48.1edc645a.js.map