{"version":3,"file":"js/views/lobby.be84e9cd.js","mappings":"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","sources":["webpack://picross/./src/views/Multiplayer/Lobby.vue","webpack://picross/./src/views/Multiplayer/Lobby.vue?51c7","webpack://picross/./src/utils/array.js"],"sourcesContent":["<template>\r\n    \r\n    <v-container class=\"fill-height\">\r\n        <v-responsive class=\"d-flex align-center fill-height\">\r\n\r\n            <v-container>\r\n                <strong class=\"text-center font-weight-bold d-block\">La partie va bientôt commencer ...</strong>\r\n            </v-container>\r\n\r\n            <v-container v-for=\"player in players\" :key=\"player.id\">\r\n                <v-card :theme=\"player.isReady ? 'is-ready' : ''\">\r\n                    <v-card-item>\r\n                        <v-card-text>\r\n                            <v-row class=\"justify-space-between align-center\">\r\n                                <strong class=\"font-weight-bold\">{{ player.login }}</strong>\r\n                                <v-checkbox-btn\r\n                                    v-if=\"this.player && this.player.id == player.id\"\r\n                                    @click=\"setPlayerReadyHandler\"\r\n                                    :model-value=\"player.isReady\"\r\n                                    label=\"Je suis prêt(e)\"\r\n                                    ></v-checkbox-btn>\r\n                                <template v-else>\r\n                                    <v-icon v-if=\"player.isReady\" icon=\"mdi-check\" color=\"green-lighten-1\"></v-icon>\r\n                                    <v-icon v-else icon=\"mdi-close\" color=\"red-lighten-1\"></v-icon>\r\n                                </template>\r\n                            </v-row>\r\n                        </v-card-text>\r\n                    </v-card-item>\r\n                </v-card>\r\n            </v-container>\r\n\r\n        </v-responsive>\r\n    </v-container>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { isIterable } from './../../utils/array'\r\n\r\nimport {\r\n    getPlayer, setPlayerReady,\r\n    onValuePlayers, onChildAddedPlayers, onChildRemovedPlayers,\r\n    listenEvents, setEventAsView\r\n} from './../../database/firebase/index.js';\r\n\r\nexport default {\r\n\r\n    data() {\r\n\r\n        return {\r\n            player   : null,\r\n            players  : []\r\n        }\r\n    },\r\n\r\n    async mounted() {\r\n\r\n        this.id = sessionStorage.getItem('id');\r\n\r\n        if (!this.id) {\r\n            this.$router.push({ name: 'multi-player-home' });\r\n        }\r\n\r\n        this.player = await getPlayer(this.id);\r\n        \r\n        if (!this.player) {\r\n            this.cleanSessionAndGoBackToMultiplayerHome();\r\n        }\r\n\r\n        onChildAddedPlayers(data => {\r\n\r\n            const { player } = data;\r\n\r\n            if (!this.players) {\r\n                this.players = [];\r\n            }\r\n\r\n            this.players.push(player);\r\n        });\r\n\r\n        onChildRemovedPlayers(data => {\r\n\r\n            const { player } = data;\r\n\r\n            if (this.player.id === player.id) {\r\n                return this.cleanSessionAndGoBackToMultiplayerHome();\r\n            }\r\n\r\n            this.players = this.players.filter(p => {\r\n                return p.id !== player.id;\r\n            });\r\n        });\r\n\r\n        onValuePlayers(data => {\r\n            \r\n            const { players } = data;\r\n            \r\n            this.players = players;\r\n        });\r\n\r\n        listenEvents(async event => {\r\n\r\n            const { id, type, senderId, views } = event;\r\n\r\n            if (this.player.id === senderId) {\r\n                return;\r\n            }\r\n\r\n            if (views && isIterable(views) && views.includes(this.player.id)) {\r\n                return;\r\n            }\r\n\r\n            await setEventAsView(id, this.player.id);\r\n\r\n            if (type === 'start') {\r\n                this.$router.push({ name: 'multi-player-game' });\r\n            }\r\n        });\r\n    },\r\n\r\n    methods: {\r\n\r\n        setPlayerReadyHandler() {\r\n\r\n            this.player.isReady = !this.player.isReady;\r\n\r\n            setPlayerReady(this.player.id, this.player.isReady);\r\n        },\r\n\r\n        cleanSessionAndGoBackToMultiplayerHome() {\r\n            sessionStorage.clear();\r\n            this.$router.push({ name: 'multi-player-home' });\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.v-card {\r\n\r\n    border: 2px solid rgb(var(--v-theme-red-lighten-1));\r\n    transition: .2s border-color ease-in-out;\r\n\r\n    &.v-theme {\r\n\r\n        &--is-ready {\r\n            border-color: rgb(var(--v-theme-green-lighten-1));\r\n        }\r\n    }\r\n}\r\n</style>","import { render } from \"./Lobby.vue?vue&type=template&id=3f493b12&scoped=true\"\nimport script from \"./Lobby.vue?vue&type=script&lang=js\"\nexport * from \"./Lobby.vue?vue&type=script&lang=js\"\n\nimport \"./Lobby.vue?vue&type=style&index=0&id=3f493b12&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/anthony/App/picross/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3f493b12\"]])\n\nexport default __exports__","/**\n * @param {Any} object\n *\n * @returns {Boolean}\n */\nexport function isIterable(object) {\n    return typeof object[Symbol.iterator] === 'function';\n}"],"names":["_createElementVNode","class","_createBlock","_component_v_container","_createVNode","_component_v_responsive","_hoisted_1","_createElementBlock","_Fragment","_renderList","$data","players","player","key","id","_component_v_card","theme","isReady","_component_v_card_item","_component_v_card_text","_component_v_row","_hoisted_2","_toDisplayString","login","this","_component_v_checkbox_btn","onClick","$options","setPlayerReadyHandler","label","_component_v_icon","icon","color","data","async","sessionStorage","getItem","$router","push","name","getPlayer","cleanSessionAndGoBackToMultiplayerHome","onChildAddedPlayers","onChildRemovedPlayers","filter","p","onValuePlayers","listenEvents","type","senderId","views","event","isIterable","includes","setEventAsView","methods","setPlayerReady","clear","__exports__","render","object","Symbol","iterator"],"sourceRoot":""}